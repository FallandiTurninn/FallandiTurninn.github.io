apply plugin: 'java'
apply plugin: 'application'

mainClassName = 'is.ru.hugb.TestRun'
version '0.1'

dependencies {
  testCompile 'junit:junit:4.12'
}

repositories {
    jcenter()
}

task fatJar(type: Jar) {
    tasks.withType(Jar) {
        destinationDir = file("$rootDir/buildToMove/New_libs")
    }
	manifest {
        attributes 'Implementation-Title': 'Gradle Jar File Example',
        	'Implementation-Version': version,
        	'Main-Class': 'is.ru.hugb.TestRun'
    }
    baseName = project.name
    from { configurations.compile.collect { it.isDirectory() ? it : zipTree(it) } }
    with jar
	
}

task move(type: Exec){
	dependsOn 'fatJar'
	tasks.findByName('move').mustRunAfter 'fatJar'
	commandLine 'sh', './bin/move.sh'	
}
